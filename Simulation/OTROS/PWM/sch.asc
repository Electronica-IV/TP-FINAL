Version 4
SHEET 1 2372 2248
WIRE 1440 -160 1216 -160
WIRE 1760 -160 1696 -160
WIRE 1920 -160 1824 -160
WIRE 2096 -160 2000 -160
WIRE 2256 -160 2096 -160
WIRE 1216 -112 1216 -160
WIRE 1440 -112 1440 -160
WIRE 1696 -112 1696 -160
WIRE 2096 -112 2096 -160
WIRE 2256 -112 2256 -160
WIRE 1696 0 1696 -32
WIRE 2096 0 2096 -48
WIRE 2096 0 1696 0
WIRE 2256 0 2256 -32
WIRE 2256 0 2096 0
WIRE 1216 16 1216 -32
WIRE 2096 32 2096 0
WIRE 1440 64 1440 -32
WIRE 1392 80 1280 80
WIRE 1760 96 1696 96
WIRE 1920 96 1824 96
WIRE 2096 96 2000 96
WIRE 2256 96 2096 96
WIRE 1696 144 1696 96
WIRE 2096 144 2096 96
WIRE 2256 144 2256 96
WIRE 1440 176 1440 144
WIRE 1392 192 1392 128
WIRE 1440 208 1440 176
WIRE 1696 256 1696 224
WIRE 2096 256 2096 208
WIRE 2096 256 1696 256
WIRE 2256 256 2256 224
WIRE 2256 256 2096 256
WIRE 2096 288 2096 256
WIRE 1440 320 1440 288
WIRE -144 368 -224 368
WIRE 192 368 -144 368
WIRE 192 416 192 368
WIRE 240 416 192 416
WIRE -224 448 -224 432
WIRE -144 448 -224 448
WIRE 160 448 -144 448
WIRE 240 448 160 448
WIRE 240 480 -32 480
WIRE 432 480 400 480
WIRE -32 512 -32 480
WIRE 240 512 128 512
WIRE 432 528 432 480
WIRE 496 528 432 528
WIRE 672 528 576 528
WIRE 496 560 496 528
WIRE -32 624 -32 592
WIRE 128 624 128 512
WIRE 128 624 -32 624
WIRE -32 640 -32 624
WIRE 1904 704 1824 704
WIRE 2096 704 1904 704
WIRE 2240 704 2096 704
WIRE -32 720 -32 704
WIRE 464 720 256 720
WIRE 624 720 464 720
WIRE 1824 736 1824 704
WIRE 256 752 256 720
WIRE 464 752 464 720
WIRE 400 800 352 800
WIRE 1904 800 1904 704
WIRE 1552 848 1552 704
WIRE 1584 848 1552 848
WIRE 1824 848 1824 816
WIRE 1824 848 1776 848
WIRE 624 864 624 720
WIRE -272 880 -544 880
WIRE 256 896 256 832
WIRE 352 896 352 800
WIRE 352 896 256 896
WIRE 464 896 464 848
WIRE 528 896 464 896
WIRE -64 912 -160 912
WIRE 0 912 -64 912
WIRE 144 912 80 912
WIRE 1248 912 1200 912
WIRE 1472 912 1328 912
WIRE 1584 912 1472 912
WIRE 256 928 256 896
WIRE 464 928 464 896
WIRE -272 944 -336 944
WIRE 1472 944 1472 912
WIRE 1824 944 1776 944
WIRE 1904 944 1904 880
WIRE 1904 944 1824 944
WIRE -336 960 -336 944
WIRE -336 960 -384 960
WIRE 144 976 144 912
WIRE 192 976 144 976
WIRE 352 976 352 896
WIRE 400 976 352 976
WIRE -544 992 -544 880
WIRE -544 992 -608 992
WIRE -496 992 -544 992
WIRE -336 992 -384 992
WIRE 1904 992 1904 944
WIRE 1936 992 1904 992
WIRE 2016 992 2000 992
WIRE 2096 992 2096 704
WIRE -496 1024 -512 1024
WIRE 1472 1040 1472 1024
WIRE 1904 1040 1904 992
WIRE 256 1072 256 1024
WIRE 256 1072 192 1072
WIRE 464 1072 464 1024
WIRE 464 1072 256 1072
WIRE 624 1072 624 928
WIRE 624 1072 464 1072
WIRE 1824 1072 1824 944
WIRE 2016 1104 2016 992
WIRE 2016 1104 1952 1104
WIRE 2096 1104 2096 1072
WIRE 2096 1104 2016 1104
WIRE -512 1152 -512 1024
WIRE -336 1152 -336 992
WIRE -336 1152 -512 1152
WIRE -272 1152 -336 1152
WIRE 2096 1152 2096 1104
WIRE -80 1184 -160 1184
WIRE 464 1184 256 1184
WIRE 624 1184 464 1184
WIRE -544 1216 -544 992
WIRE -272 1216 -544 1216
WIRE 464 1216 464 1184
WIRE 256 1232 256 1184
WIRE 400 1264 352 1264
WIRE 1824 1280 1824 1136
WIRE 1904 1280 1904 1168
WIRE 1904 1280 1824 1280
WIRE 2096 1280 2096 1232
WIRE 2096 1280 1904 1280
WIRE 1904 1296 1904 1280
WIRE 2096 1296 2096 1280
WIRE 624 1328 624 1184
WIRE -80 1360 -80 1184
WIRE 0 1360 -80 1360
WIRE 144 1360 80 1360
WIRE 256 1360 256 1312
WIRE 352 1360 352 1264
WIRE 352 1360 256 1360
WIRE 464 1360 464 1312
WIRE 528 1360 464 1360
WIRE 256 1392 256 1360
WIRE 464 1392 464 1360
WIRE 144 1440 144 1360
WIRE 192 1440 144 1440
WIRE 352 1440 352 1360
WIRE 400 1440 352 1440
WIRE 1440 1472 784 1472
WIRE 1760 1472 1696 1472
WIRE 1920 1472 1824 1472
WIRE 2096 1472 2000 1472
WIRE 2256 1472 2096 1472
WIRE 784 1520 784 1472
WIRE 1440 1520 1440 1472
WIRE 1696 1520 1696 1472
WIRE 2096 1520 2096 1472
WIRE 2256 1520 2256 1472
WIRE 256 1536 256 1488
WIRE 464 1536 464 1488
WIRE 464 1536 256 1536
WIRE 624 1536 624 1392
WIRE 624 1536 464 1536
WIRE 1696 1632 1696 1600
WIRE 2096 1632 2096 1584
WIRE 2096 1632 1696 1632
WIRE 2256 1632 2256 1600
WIRE 2256 1632 2096 1632
WIRE 784 1648 784 1600
WIRE 2096 1664 2096 1632
WIRE 1760 1728 1696 1728
WIRE 1920 1728 1824 1728
WIRE 2096 1728 2000 1728
WIRE 2256 1728 2096 1728
WIRE 1696 1776 1696 1728
WIRE 2096 1776 2096 1728
WIRE 2256 1776 2256 1728
WIRE 1440 1888 1440 1600
WIRE 1696 1888 1696 1856
WIRE 2096 1888 2096 1840
WIRE 2096 1888 1696 1888
WIRE 2256 1888 2256 1856
WIRE 2256 1888 2096 1888
WIRE 1392 1904 1280 1904
WIRE 2096 1920 2096 1888
WIRE 1440 2000 1440 1968
WIRE 1392 2016 1392 1952
WIRE 1440 2048 1440 2000
WIRE 1440 2144 1440 2128
FLAG -32 720 0
FLAG 320 368 VDD
FLAG 320 560 0
FLAG 1440 320 0
FLAG 1216 16 0
FLAG 2096 96 VDD
FLAG 1392 192 0
FLAG 2096 -160 Vo
FLAG 2096 32 0
FLAG 2096 288 0
FLAG 1280 80 VGG1
FLAG 2096 1296 0
FLAG 1904 1296 0
FLAG 1472 1040 0
FLAG 1200 912 fb
FLAG 2240 704 Vo
FLAG 400 448 pwmo
FLAG 496 624 0
FLAG 672 528 cs
FLAG 1440 176 cs
FLAG -608 992 pwmo
FLAG 256 720 VDD
FLAG 528 896 VGG1
FLAG 192 1072 0
FLAG -384 1024 VDD
FLAG -384 1056 0
FLAG -496 1056 0
FLAG -496 960 0
FLAG -64 912 nand
FLAG 256 1184 VDD
FLAG 528 1360 VGG2
FLAG 256 1536 0
FLAG -336 944 Q
FLAG 1440 2144 0
FLAG 784 1648 0
FLAG 2096 1728 VDD
FLAG 1392 2016 0
FLAG 2096 1472 Vo
FLAG 2096 1664 0
FLAG 2096 1920 0
FLAG 1280 1904 VGG1
FLAG 1440 2000 cs
FLAG 160 448 fb
FLAG -32 480 vref
FLAG 1552 704 vref
SYMBOL res -48 496 R0
SYMATTR InstName R1
SYMATTR Value 18k
SYMBOL cap -48 640 R0
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL voltage 1216 -128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vd1
SYMATTR Value 300
SYMBOL ind2 1424 -128 R0
SYMATTR InstName L1
SYMATTR Value {L1}
SYMATTR Type ind
SYMBOL ind2 1712 240 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value {L22}
SYMATTR Type ind
SYMBOL sw 1440 160 M180
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL diode 1760 112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res 2016 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1m
SYMBOL cap 2080 144 R0
SYMATTR InstName C2
SYMATTR Value 50µ
SYMBOL res 2240 128 R0
SYMATTR InstName R3
SYMATTR Value 50
SYMBOL ind2 1712 -16 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L3
SYMATTR Value {L21}
SYMATTR Type ind
SYMBOL diode 1760 -144 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL res 2016 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1m
SYMBOL cap 2080 -112 R0
SYMATTR InstName C3
SYMATTR Value 50µ
SYMBOL res 2240 -128 R0
SYMATTR InstName R5
SYMATTR Value 120
SYMBOL res 1424 192 R0
SYMATTR InstName RCS
SYMATTR Value 1
SYMBOL Optos\\4N25 1680 912 M0
SYMATTR InstName U2
SYMBOL res 1808 720 R0
SYMATTR InstName R6
SYMATTR Value 24.6k
SYMBOL res 2080 976 R0
SYMATTR InstName R7
SYMATTR Value 109k
SYMBOL res 2080 1136 R0
SYMATTR InstName R8
SYMATTR Value 2.38k
SYMBOL zener 1840 1136 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value UFZV33B
SYMBOL AutoGenerated\\TL431 1904 1104 R180
SYMATTR InstName U3
SYMBOL res 1456 928 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 1344 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 5K
SYMBOL res 1888 784 R0
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL cap 2000 976 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 100p
SYMBOL res 592 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL cap 480 560 R0
SYMATTR InstName C5
SYMATTR Value 100p
SYMBOL npn 400 752 R0
SYMATTR InstName Q7
SYMATTR Value 2N2222
SYMBOL pnp 400 1024 M180
SYMATTR InstName Q8
SYMATTR Value 2N2907
SYMBOL res 240 736 R0
SYMATTR InstName R17
SYMATTR Value 12k
SYMBOL res 96 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res 96 1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 1k
SYMBOL CD4013B -448 1008 R0
SYMATTR InstName U7
SYMATTR SpiceLine VDD=16 SPEED=1.0 TRIPDT=1e-9
SYMBOL CD4093B -224 912 R0
SYMATTR InstName U8
SYMATTR SpiceLine VDD=16 SPEED=1.0 TRIPDT=1e-9
SYMBOL CD4093B -224 1184 R0
SYMATTR InstName U9
SYMATTR SpiceLine VDD=16 SPEED=1.0 TRIPDT=1e-9
SYMBOL cap 608 864 R0
SYMATTR InstName C7
SYMATTR Value 10µ
SYMBOL npn 400 1216 R0
SYMATTR InstName Q9
SYMATTR Value 2N2222
SYMBOL pnp 400 1488 M180
SYMATTR InstName Q10
SYMATTR Value 2N2907
SYMBOL res 240 1216 R0
SYMATTR InstName R20
SYMATTR Value 12k
SYMBOL cap 608 1328 R0
SYMATTR InstName C8
SYMATTR Value 10µ
SYMBOL npn 192 928 R0
SYMATTR InstName Q11
SYMATTR Value 2N2222
SYMBOL npn 192 1392 R0
SYMATTR InstName Q12
SYMATTR Value 2N2222
SYMBOL voltage 784 1504 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vd2
SYMATTR Value 300
SYMBOL ind2 1424 1504 R0
SYMATTR InstName L4
SYMATTR Value {L1}
SYMATTR Type ind
SYMBOL ind2 1712 1872 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L5
SYMATTR Value {L22}
SYMATTR Type ind
SYMBOL sw 1440 1984 M180
SYMATTR InstName S2
SYMATTR Value MYSW
SYMBOL diode 1760 1744 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMBOL res 2016 1712 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 1m
SYMBOL cap 2080 1776 R0
SYMATTR InstName C6
SYMATTR Value 50µ
SYMBOL res 2240 1760 R0
SYMATTR InstName R14
SYMATTR Value 50
SYMBOL ind2 1712 1616 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L6
SYMATTR Value {L21}
SYMATTR Type ind
SYMBOL diode 1760 1488 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMBOL res 2016 1456 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 1m
SYMBOL cap 2080 1520 R0
SYMATTR InstName C9
SYMATTR Value 50µ
SYMBOL res 2240 1504 R0
SYMATTR InstName R16
SYMATTR Value 120
SYMBOL res 1424 2032 R0
SYMATTR InstName RCS1
SYMATTR Value 1
SYMBOL res -160 352 R0
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL cap -240 368 R0
SYMATTR InstName C10
SYMATTR Value 100p
SYMBOL UCC28C42_STEADY 320 464 R0
SYMATTR InstName U4
TEXT 1488 -200 Left 2 !K1 L1 L2 L3 1
TEXT 1568 352 Left 2 !.model MYSW SW(Ron=0.01 Roff=10Meg Vt=.5 Vh=.4 Lser=0 Vser=0)
TEXT 1568 432 Left 2 !.tran 100m
TEXT 1568 392 Left 2 !.param Fsw=50k Ts={1/Fsw} D=0.25 Ton={D*Ts}
TEXT 1568 472 Left 2 !.param AL=4700n N1=25 N21=28 N22=4
TEXT 1568 512 Left 2 !.param L1={AL*N1*N1} L21={AL*N21*N21} L22={AL*N22*N22}
TEXT 1488 1432 Left 2 !K2 L4 L5 L6 1
TEXT 1568 1984 Left 2 !.model MYSW SW(Ron=0.01 Roff=10Meg Vt=.5 Vh=.4 Lser=0 Vser=0)
